\chapter{Modellbildung und Einbindung der GPS- und GIS-Daten}
Dieser Abschnitt behandelt die Akquirierung und die Struktur der verwendeten GPS-Daten für das Training des Entscheidungsbaums. Außerdem wird erläutert, wieso der Entscheidungsbaum als Schlussfolgerungsmodell ausgewählt und wie er erstellt wurde. Aufgrund der unterschiedlichen Attribute  der beiden Fälle (mit und ohne GIS-Daten), sehen die zwei Entscheidungsbäume sehr unterschiedlich aus und werden daher nur oberflächlich miteinander verglichen.

Sowohl für die Trainingsdaten für den Entscheidungsbaum als auch für die Testdaten wird erläutert, wie diese aufgezeichnet wurden. Dies inkludiert sowohl die Geräte als auch die Software, welche dazu verwendet worden ist. Weiters wird auf die Struktur der GPS-Spuren und der GIS-Daten eingegangen.

Außerdem wird dargelegt, woher die verwendeten GIS-Daten stammen, wie diese extrahiert wurden und welche Rolle sie im weiteren Prozess spielen. Abschließend wird auch auf die Positionsdaten der verschiedenen Verkehrsmittel des ÖPNV eingegangen und in welcher Weise diese hätten eingesetzt werden können.
\clearpage

\section{Trainingsdaten}
\label{sec:trainingdata}
Für das Training der Entscheidungsbäume konnten GPS-Aufzeichnungen aus einem Projekt von Sebastian Nagel "Möglichkeitsstudie zum Projekt: Mobilitäts-Tracker" verwendet werden. Diese Daten wurden mit verschiedenen GPS-Geräten (Wintec WTB-202, Columbus V-900, photoMate 887 Lite, qStarz BT-Q1300, xaiox) und der Hilfe von mehreren Personen aufgezeichnet und beinhalten alle in dieser Arbeit betrachteten Verkehrsmittel. \cite{sebastian_nagel_moglichkeitsstudie_2011}

Weiters wurden zum Training auch neue Datensätze verwendet, die mit zwei verschiedenen Smartphones und mit Hilfe der App ``MyTrack`` aufgezeichnet wurden. Diese App wurde ausgewählt, da sie sich sehr einfach handhaben lässt und die einzelnen Aufzeichnungen komfortabel exportiert werden können. 

Einen groben Überblick über die gesammelten Daten bietet die Tabelle \ref{datenuebsicht}. Die erste Spalte enthält den Verkehrsmitteltyp, die Zweite die Anzahl der Segmente  und die dritte Spalte enthält die Gesamtdistanz in Kilometern von dem jeweiligen Typ. Insgesamt beinhalten die Trainingsdaten 187 Segmente der verschiedenen Transportmittel und erstrecken sich über annähernd über 2000 Kilometer.

\begin{table}
\centering
\begin{tabular}{| c | c | c | }
\hline
\textbf{Typ} & \textbf{Anzahl} & \textbf{Distanz (km)}\\ 
\hline
Auto &	72 & 736,91\\
\hline
Fußgänger &	55 & 72,32\\
\hline
Fahrrad	& 37 & 805,37\\
\hline
Zug & 8 & 240,26\\
\hline
Bus	& 15 & 66,81\\
\hline
\textbf{Gesamt} & \textbf{187} & \textbf{1.921,67}\\
\hline
\end{tabular}
\caption{Trainingsdatenübersicht}
\label{datenuebsicht}
\end{table}

\subsection{Struktur der GPS-Daten}
Diese Trainingsdaten sind in den einzelnen Dateien als XML abgelegt und entsprechen dem gängigen GPX-Format, wie es im Listing \coderef{gpxfile} ersichtlich ist. Die Spezifikation für GPX kann auf der Webseite von Topografix unter \url{ http://www.topografix.com/GPX/1/1/} gefunden werden. Ein zugehöriges XML-Schema findet man hier \url{http://www.topografix.com/GPX/1/1/gpx.xsd}. \cite{topografix_gpx_2004} 

\paragraph{Track (trk)}
Üblicherweise beginnt eine solche Datei mit einem gpx-Element, welches wiederum einen Track enthält. Ein Track repräsentiert eine Aufzeichnung oder Spur und enthält eine Folge aller aufgezeichneten Trackpoints. Diese sind aber wiederum in ein oder mehrere Tracksegmente gegliedert.

\paragraph{Tracksegment (trkseg)}
Ein Track kann aus einem oder mehreren Tracksegmenten bestehen. Die Tracksegmente enthalten wiederum beliebig vielen aufeinander folgenden Trackpoints. Mit diesen Segmenten kann ein Track in logische Abschnitte unterteilt werden. Außerdem kann ein neues Segment kann begonnen werden, wenn zum Beispiel die Verbindung verloren oder der GPS-Empfänger aus- und wieder eingeschaltet wurde.

\paragraph{Trackpoint (trkpt)}
Ein Trackpoint entspricht einem Punkt des aufgezeichneten Tracks und enthält Koordinate (Längen- und Breitengrad) sowie einen Zeitstempel und die Höhenmeter. Es gibt aber auch Fälle, in welchen bei einem Trackpoint auch die Geschwindigkeits- oder Beschleunigungsdaten abgelegt wurden.
 

\begin{code}[xml]{GPX-Datei}{gpxfile}
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<gpx xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.topografix.com/GPX/1/1" ...>
    <metadata>
        <name>Badgasse - FH</name>
        <desc></desc>
    </metadata>
    <trk>
        <name>Badgasse - FH</name>
        <trkseg>
            <trkpt lat="47.39786" lon="9.735109">
                <ele>475.0</ele>
                <time>2015-02-19T07:20:18.156Z</time>
            </trkpt>
            ...
            <trkpt lat="47.405439" lon="9.744841">
                <ele>492.0</ele>
                <time>2015-02-19T07:24:35.160Z</time>
            </trkpt>
        </trkseg>
    </trk>
</gpx>
\end{code}

\subsection{Entscheidungsbaum als Schlussfolgerungsmodell}
\label{entscheidungsbaumAlsSchlussfolgerungsmodell}
Aufgrund des guten Abschneidens des Entscheidungsbaums in verschiedenen Arbeiten  \cite{stenneth_transportation_2011}, \cite{reddy_using_2010}, \cite{sebastian_nagel_moglichkeitsstudie_2011}und \cite{zheng_learning_2008} wurde auch in dieser Arbeit ein Entscheidungsbaum als Schlussfolgerungsmodell verwendet. Um einen Entscheidungsbaum erstellen zu können werden Trainingsdaten benötigt. Daraus werden dann die Regeln für den Entscheidungsbaum bzw. die jeweiligen Entscheidungen des Baums abgeleitet.

Deshalb wurde für diese Trainingsdaten ein Teil der gesammelten GPS-Daten manuell segmentiert und mit dem benutzten Verkehrsmittel ergänzt. Mit Hilfe des Prototyps wurden die Trainigsdaten eingelesen, gefiltert und mit zusätzlichen Informationen bereichert. Diese zusätzlichen Informationen sind bei der Variante ohne GIS-Daten zum Beispiel Geschwindigkeit und Beschleunigung. Bei der Variante mit GIS-Daten wird unter anderem die Nähe zu Bushaltestellen oder zu Schienen ergänzt. Danach wurde für alle eingelesenen Segmente die berechneten Werte und das dazugehörige Verkehrsmittel in einer Datei im CSV-Format abgelegt. 

Für die konkrete Generierung der Entscheidungsbäume wurde das Tool Rapidminer verwendet. Dabei handelt es sich um eine Open-Source Datamining Software welche sowohl verschiedenste Datenquellen unterstützt (Datenbanken und auch einzelne Dateien in unterschiedlichen Dateiformaten) als auch die Generierung von Entscheidungsbäumen über eine komfortable Benutzeroberfläche erlaubt. In der freien Community-Version ist jedoch nur der CSV-Import verfügbar. Deshalb wurde vom Prototypen auch eine CSV-Datei generiert welche in Folge einfach in Rapidminer eingebunden und ausgewertet werden konnten. Schlussendlich wurden aus den eingebundenen Daten Entscheindungsbäume für die Variante mit GIS-Daten und ohne generiert. Diese können sowohl als Bilder als auch in Textform exportiert werden. In weiterer Folge wurde aus diesen Entscheidungsbäumen in Textform PHP-Klassen geniert siehe Abschnitt \nameref{entscheidungsbaumGenerierungPHP}.

\subsubsection{Überanpassung (Overfitting)}
Beim Erstellen von Entscheidungsbäumen wie auch bei anderen von Trainingsdaten lernenden Algorithmen muss beachtet werden, dass das Ergebnis nicht zu sehr auf die Trainingsdaten zugeschnitten ist. Dies bedeutet man möchte, dass mit Hilfe der Trainingsdaten ein Modell generiert wird, welches auch für Nichttrainingsdaten ein akzeptables Resultat liefert und nicht zu sehr auf die Gegebenheiten / Ungenauigkeiten in den Trainingsdaten spezialisiert ist. Ist dies jedoch der Fall so spricht man von einer Überanpassung (Overfitting) des Modells auf die Daten.  \cite{tom_dietterich_overfitting_1995}

\subsubsection{Zurückschneiden (Pruning)}
Ist ein Entscheidungsbaum zu sehr angepasst auf die Trainingsdaten so muss dieser wieder zurückgeschnitten werden. Dies bedeutet, dass einzelne Blätter oder auch Teilbäume wieder entfernt werden um ein bestmögliches Resultat (geringe Anzahl an Fehlern) für Nichttrainingsdaten zu erhalten. Für diese Aufgabe wurden verschiedene Algorithmen Entwickelt, welche unter anderem in der Publikation ``Pruning Decision Trees with Misclassification Costs`` von Jeffrey Bradford beschrieben werden. \cite{jeffrey_p._bradford_pruning_1998}

\subsubsection{Entscheidungsbaum ohne GIS-Daten}
\label{entscheidungsbaum}
Der Entscheidungsbaum ohne Berücksichtigung von GIS-Daten ist in Abbildung \imgref{decissiontree} zu sehen. Bei diesem Entscheidungsbaum wurden mittlere und maximale Geschwindigkeit, Stopprate sowie mittlere und maximale Beschleunigung als Indikatoren für den Entscheidungsprozess gewählt. Wie diese Werte berechnet und ergänzt werden wird im Abschnitt \nameref{schlussfolgerungsvariablen}, erklärt. 

\img{0.68}{document/graphics/decission-tree-stoprate.png}{Entscheidungsbaum ohne GIS-Daten}{decissiontree}
\clearpage

\subsubsection{Entscheidungsbaum mit GIS-Daten}
\label{entscheidungsbaumGIS}
\todo{entscheidungsbaum mit gis daten}
\todo{entscheidungsbaum mit gis daten bild}
\img{0.68}{document/graphics/decission-tree-stoprate.png}{Entscheidungsbaum mit GIS-Daten}{GISdecissiontree}
\clearpage


\section{Neue Aufzeichnungen}
Wie bereits im Abschnitt \ref{sec:trainingdata} erwähnt, wurden die neuen Daten mit zwei Smartphones (Samsung Galaxy S und einem LG Nexus 5) und der App ``MyTrack`` (sieh Abbildung \imgref{myTrack}) aufgezeichnet. Neben der einfachen Handhabung bietet diese App auch an nur Punkte mit einer Mindestgenauigkeit aufzuzeichnen was in Folge beim Filtern ein wenig Arbeit abnimmt. Diese neuen Daten werden hauptsächlich zum Testen verwendet werden und nur ein Teil davon ist in die Trainingsdaten eingeflossen. Weiters kann man zwar ein Fortbewegungsmittel pro Aufzeichnung angeben, aber dies hat keinerlei Einfluss auf die Aufzeichnung selbst oder die Daten - es dient lediglich der visuellen Darstellung/Unterscheidung der einzelnen Aufzeichnungen.

\img{1}{document/graphics/myTrack.png}{Die App myTrack}{myTrack}

\section{GIS-Daten}
Als relevante GIS-Daten kommt laut den verschiedensten Publikationen zum Thema Verkehrsmittelerkennung einiges in Frage wie z.B. Parkplätze, Busstationen, Gleise, Bahnhöfe und das gesamte Straßennetz. All diese Daten mögen zwar relevant sein, aber es handelt sich auch um sehr viele Daten was wiederum bedeutet, dass die Bearbeitungszeit einer Aufzeichnung rasch ansteigt. Da der Prototyp auch für konkrete Endbenutzer interessant sein soll, wird auf die Verwendung des Straßennetzes und der Parkplätze verzichtet, um die Bearbeitungszeit möglichst gering zu halten. Deshalb wird auf die Verwendung von Busstationen und der Gleise gesetzt da dies schon in der Arbeit von Stenneth \cite{stenneth_transportation_2011} zu guten Resultaten geführt hat. Dieser Ansatz wird ergänzt mit den GIS-Daten des Autobahnnetzes da in diesen viel Potential vermutet wird und es sich um eine überschaubare Menge an Daten handelt.

\textbf{Akquirierung}\\
Allgemein sind GIS-Daten via OpenStreetMaps oder Google-Maps verfügbar, aber in einzelnen Stichproben hat sich herausgestellt, dass die Zusatzinformation in OpenStreetMaps wesentlich detaillierter und einfacher zum Extrahieren sind. Dafür wurde in Kauf genommen, dass diese Daten nicht standardisiert eingetragen wurden.

Die Österreich-Daten von OpenStreetMaps wurden als Archiv heruntergeladen und mit Hilfen von JOSM auf den relevanten Bereich eingegrenzt. JOSM ist ein Tool mit welchem die Daten von OpenStreetMaps gepflegt werden können. Nachdem der Bereich auf Vorarlberg eingegrenzt worden ist, konnte dieser mit Hilfe von osmosis (weiteres Tool von der OpenStreetMaps-Community) auf bestimmte Punkte und Verbindungen gefiltert werden. Dadurch war es möglich, das Schienennetz von Vorarlberg sowie die Busstationen von Vorarlberg als XML-Datei zu exportieren. Diese XML-Dateien für Busstationen, das Autobahnnetz und das Schienennetz wurden anschließend eingelesen und in die Datenbank importiert. 

In weiterer Folgen können diese Daten zur genaueren Bestimmung eines Verkehrsmitteltyps verwendet werden. Dazu werden Werte für die Nähe zu Bushaltestellen sowie Bahnhöfen bei Trackpunkten ohne Bewegung ermittelt. Außerdem wird in regelmäßigen Abständen die Nähe zu den Schienen und der Autobahn für jedes Segment berechnet. Dieser Prozess wird im Abschnitt \nameref{gisdaten} genauer beschrieben.

\section{Weitere Daten}
Neben den zusätzlichen Werten, die aus den GPS-Spuren berechnet werden können und den GIS-Daten, wurde auch überlegt, Daten des öffentlichen Personennahverkehrs einzubinden, da diese in Vorarlberg über eine GPS-Position eines jeden Busses verfügen würden. Die Verwendung dieser Daten wäre insofern vielversprechend gewesen, als dass man einen ähnlichen Ansatz wie Stenneth verfolgen hätte können. Man hätte dadurch überprüfen können ob an der jeweiligen Stelle gerade ein Bus steht und darüber Rückschlüsse treffen können. Da diese Daten aber zum Zeitpunkt dieser Arbeit weder für diese Arbeit noch für die Öffentlichkeit verfügbar sind, scheidet diese Möglichkeit aus.

\clearpage

\section{Zusammenfassung}
\todo{zusammenfassung daten?}
